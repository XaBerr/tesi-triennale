\subsection{Architettura del processore}
\subsubsection{Introduzione}
Questa sezione andrà a parlare dei primi due computer commerciali della \textit{D-Wave} che sono il \myindex{D-Wave One} e il \myindex{D-Wave Two} e andrà ad esplorare la loro architettura per comprendere l'idea che la \textit{D-Wave} ha di quantum computer. Il loro computer si basa sul quantum anneling spesso abbreviato con \myindex{QA}. Il processore ha dei qubit sviluppati con l'architettura rf-SQUID che sono degli anelli superconduttivi che possono essere accoppiati a due a due. Un quantum computer per eseguire algoritmi ha necessita di un numero considerevole di qubit, il \textit{D-Wave One} ne possiede 128 mentre il \textit{D-Wave Two} ne possiede 512. Un numerò così grande di qubit genera delle problematiche di costruzione sopratutto per quanto riguarda la scalabilità. Fortunatamente gran parte dell'elettronica moderna dell'epoca fu riutilizzabile per sviluppare il primo modello il \textit{D-Wave One} basato sull'architettura dei \myindex{SFQ} single flux quanta. Da allora la tecnologia si è evoluta e con nuove tecniche e nuove architetture si è realizzato il \textit{D-Wave Two} computer di seconda generazione. L'innovazioni principali non furono sui qubit o sulla loro gestione di accoppiamento, ma furono sul sistema di controllo del processore e sul sistema di fabbricazione. Il \textit{D-Wave One} usava un demultiplexer per controllare i SFQ, questo implicava che per controllare $N$ qubit bisognava avere $O(\log{N})$ linee di indirizzamento. Questa architettura era stata studiata per dissipare meno energia possibile durante la programmazione. Il \textit{D-Wave Two} ha invece sradicato completamente il problema, eliminando totalmente la dissipazione di energia statica attraverso l'introduzione dell'\myindex{indirizzamento XYZ} con l'utilizzo di solo $O(\sqrt[3]{N})$ linee.
Un altro obiettivo raggiunto del \textit{D-Wave Two} è stato il miglioramento delle prestazioni dell'algoritmo di anneling ottimizzando la scala energetica dei qubit, traguardo raggiunto riducendo la dimensione fisica dei qubit di un fattore di due. Questa modifica ha influito negativamente sul processo di fabbricazione obbligando ad aumentare da quattro a sei il numero di livelli di metallo ma positivamente ha aumento di quattro volte la densità del processore. Ora proseguiamo analizzando la topologia del processore che è comune per entrambe le macchine.

\subsubsection{Topologia}
\myparagraph{I vincoli}
Il processore sul quantum anneling è basato sul modello di Ising e mira a risolvere problemi di minimizzazione sui grafi, in particolare è stato pensato per risolvere questo problema: dato un grafo fisico $G$, minimizzare la seguente forma quadratica di variabili discrete $s_i \in \{-1, +1\}$:
$$E(\vec{s}|\vec{h}, \hat{J}) = \sum_{i \in nodes(G)} h_i s_i + \sum_{<i,j> \in nodes(G)} J_{ij} s_i s_j$$
dati come parametri del problema $h_i, J_{ij} \in {-1, -7/8, ..., +7/8, +1}$. La topologia corrispondente all'architettura hardware utilizzata nel \textit{D-Wave One} e nel \textit{D-Wave Two} è stata chiamata \myindex{Chimera}. La struttura Chimera è sata basata su tre \myindex{vincoli topografici} importati: non planarità, possibilità di sviluppare grafi completi e la possibilità di avere dei circuiti di controllo. La \myindex{non planarità} è necessaria quando si vuole poter risolvere problemi np-completi, la soluzione è stata ottenuta introducendo la catena di qubit. L'\myindex{abilità di sviluppare grafi completi} non è solo legata alla non planarità ma è anche legata alla possibilità di mappare il grafo di qubit logici (software) in qubit fisici (hardware) che differiscono in termini di possibilità di interconnessione. Come anticipato in precedenza un qubit logico può essere sviluppato con quella che viene chiamata una catena di qubit fisici ma può essere rappresentato da strutture più complesse come alberi o sottografi. Per capire se un grafo può essere rappresentato all'interno dell'hardware si utilizza la \textit{straightforward prescription}.
La necessità di avere dei \myindex{circuiti di controllo} diventa indispensabile con l'aumentare del numbero di qubit, infatti sebbene pochi qubit possano essere controllati con precisione da sole linee di controllo, molti qubit presentano dei problemi risolvibili solo mediante un circuito di controllo dedicato. Attualmente il processore QA ha delle \textit{"manopole"} per controllare il sistema, in particolare ce ne sono sei associate ad ogni qubit, necessarie per regolarizzare le variazioni dovute alla fabbricazione e una associata agli accoppiamenti dei qubit. Per realizzare queste manopole di controllo sono stati impiegati dei bias a flusso statico, programmabili da sistemi di controllo che combinano la trasformazione digitale analogia alla scrittura di una memoria persistente. Questi sistemi di controllo sono stati chiamati flux DAC o \myindex{$\Phi$-DAC} (flux digital analog converter). Il loro numero considerevole all'interno del circuito influenza la forma dei qubit e la topologia del circuito.
Oltre ai vincoli della topologia ci sono anche altre costrizioni, in particolare andremmo ad esporne le cinque più importanti. Dal punto di vista ideale ogni qubit dovrebbe essere connesso ad ogni altro, sfortunatamente al livello fisico c'è una limitazione di \myindex{interconnessione tra qubit} perché sebbene si possano realizzare catene, alberi, e sottografi dei qubit logici, un qubit può essere collegato solo ad un numero di qubit $\le 10$ a causa di caratteristiche non ideali e problemi delle scale energetiche introdotti dal superamento di questo limite. Un altro vincolo che deriva dal minimizzare le scale di energia e anche introduce il problema di massimizzare la forza di accoppiamento è la \myindex{minimizzazione del disaccopiamento} ovvero minimizzare la superficie dei qubit che non viene utilizzata per gli accoppiamenti con altri qubit. Idealmente tutta la superfice dei qubit dovrebbe essere intersecata dalla superfice dei sistemi di accoppiamento e tutti i sistemi di accoppiamento dovrebbero avere la superfice intersecata con i qubit. Questa struttura composta da qubit, sistemi di accoppiamento, $\Phi$-DAC è implementata su un chip ovvero utilizza un \myindex{integrazione bidimensionale}. Sebbene sviluppare questa tecnologia attraverso un integrazione tridimensionale sarebbe più vantaggiosa dal lato teorico, dal lato pratico è molto più semplice sviluppare attraverso un sistema scalabile a due dimensioni. Qui si introduce il quinto dei nostri vincoli, ovvero, l'introduzione della \myindex{unità piastrella}. Proprio come accade nella vita di tutti i giorni, ricoprire un pavimento con piastrelle regolari è molto più facile che con oggetti non regolari, questa differenza si sente sempre di più aumentando la superfice che vogliamo ricoprire.
\myparagraph{Le soluzioni di Chimera}
La scelta della struttura Chimera è risultata vantaggiosa per risolvere molti di questi problemi. La prima caratteristica importante, che ha questa struttura, è l'utilizzo dei flux qubit. Questi qubit a flusso sono degli anelli macroscopici con delle interruzioni chiamate \textit{Josephson junction}. La loro struttura macroscopica permette di deformare il corpo del qubit allungandolo e ruotandolo a piacere a seconda delle necessità. Stessa cosa, molto similarmente, vale per i sistemi di accoppiamento. Una unità piastrella Chimera è composta da otto qubit, quattro orizzontali e quattro verticali disposti a griglia ed accoppiati nelle loro intersezioni. L'unità è strutturata in modo che disponendo due piastrelle adiacenti, sia in orizzontale che in verticale, si possano allineare i qubit e quindi anche supportare accoppiamenti tra qubit interni e qubit esterni alla piastrella. Questa disposizione di qubit è associabile ad un grafo non planare, ovvero ad un grafo che disteso su un piano non può essere disegnato senza incrociare gli archi.
Usando l'abilità di creare catene di qubit fisici, esiste un approccio diretto per incorporare grafici completi fino a $4N$ nodi in una griglia $N \times N$ formata da piastrelle $K_M$ composte da $M + M$ qubit. Questa griglia viene indicata con $C_N$. Nel \textit{D-Wave One} la griglia è formata da $4\times4$ piastrelle quindi un $C_4$ mentre nel \textit{D-Wave Two} è formata da un $8\times8$ ovvero un $C_8$, entrambe con una piastrella $K_4$. Un modo pratico per vedere questo grafo completo è prendere una piastrella $K_4$ e decidere di rappresentare un qubit logico come due qubit fisici, in particolare scegliamo di prenderne uno orizzontale e uno verticale. Così facendo avremo quattro qubit totali rappresentabili all'interno della cella dove ogni qubit si collega con tutti gli altri tre formando un grafo completo. Diventa intuitivo poi generalizzare questo concetto allungando la nostra catena di quibit fisici attraverso più celle. Un altra caratteristica della struttura Chimera è la possibilità di avere integrati i sitemi di controllo sulla piastrella. Ogni buco della griglia $4\times4$ è occupato da tre sistemi di controllo: uno per controllare il qubit verticale, uno per controllare il qubit orizzontale e uno per controllare il loro sistema di accoppiamento. I sistemi di accoppiamento hanno una forma a L che si distribisce, partendo dal punto in cui i qubit si sovrappongono, per tutti e due i qubit fino a poco prima del prossimo incrocio con altri qubit. Questa forma permette la massima copertura reciproca di superfici tra sistema di accoppiamento e qubit.
La regolarità della piastrella Chimara consente la massima scalabilità del circuito lasciando come vincoli il numero di linee indirizabili e quelli strettamente legati alla fabbricazione. La scelta di avere un $K_4$ è dipesa da due fattori importanti. Il primo è legato al fatto che $\Phi$-DAC hanno una disposizione ottimale in una gliglia $5\times5$ che si sovrappone alla griglia $4\times4$ dei qubit riducendo al minimo lo spreco di spazi. Il secondo è che il numero di $\Phi$-DAC usati per bilanciare le variazioni di produzione e il numero di $\Phi$-DAC usati effettivamente per la risoluzione del problema, si bilanciano.

\subsubsection{$\Phi$-DAC}
\myparagraph{$\Phi$-DAC teorici}
I $\Phi$-DAC sono i diretti responsabili della precisione del sistema. La capacità di flusso di ogni singolo $\Phi$-DAC è regolata da 8 bit di range dinamico. Per massimizzare questo range dinamico e per minimizzare l'area occupata è stato scelto di implementare la maggior parte dei $\Phi$-DAC come dispositivi a doppio stage. Ogni $\Phi$-DAC è composto da due SQUID dove ognuno di questi SQUID serve a rappresentare una cifra, la più significativa è chiamata \myindex{MSD} (most significant digit) mentre quella meno significativa è chiamata \myindex{LSD} (less significant digit). In uno SQUID può essere memorizzato, attraverso impulsi SFQ, una cifra di flusso quantistico $m$ che può variare in $-8 \le m \le +8$. Oltre agli SQUID nei $\Phi$-DAC è presente una scala di anelli connessi sia agli SQUID che all'output attraveso delle induttanze. Questa scala di anelli ne comprende solo due, uno chiamato $M_{MSD}$ associato allo SQUID $L_{MSD}$ mentre l'altro chiamato $M_{LSD}$ associato allo SQUID $L_{LSD}$. $L_{LSD}$ e $M_{LSD}$ sono anche i nomi delle loro induttanze.
Tra i due anelli è presente un altra induttanza $L_{div}$ che serve appunto a scalare il segnale entrante dalla cifra meno significativa. Un SFQ $\phi_0$ aggiunto allo SQUID $L_{MSD}$ viene scritto sul anello $M_{MSD}$ attraverso il rapporto delle loro induttanze $\frac{M_{MSD}}{L_{MSD}}\Phi_0$.
Lo stesso segnale verrà mandato in output come $\frac{M_{MSD}}{L_{MSD}}\frac{M_{tot0}}{M_{out}}\Phi_0$ dove $M_{tot0}$ è l'induttanza totale dell'anello MSD $M_{tot0} = M_{out} + M_{MSD} + M_{div}$ e $M_{out}$ è l'iduttanza di uscita verso il dispositivo di lettura che può essere un qubit pittosto che un sistema di accoppiamento. Dalle formule appena scritte possiamo notare flusso in uscita aumenta in modo lineare con il numero di SFQ aggiunti o sottratti dagli SQUID. In realtà esisterebbe anche una componente non lineare, che non viene tenuta conto perché nel caso della \textit{D-Wave}, che è trascurabile essendo le dimensioni delle induttanze molto inferiori degli SQUID.
Un SFQ $\phi_0$ aggiunto allo SQUID $L_{LSD}$ viene scritto sulla scala come $\frac{M_{LSD}}{L_{LSD}}\frac{L_{div}}{L_{tot1}}\Phi_0$ dove $M_{tot1} = M_{div} + M_{LSD}$. Ognuno dei due SQUID può memorizzare 8 SFQ sia in un verso che nell'altro per un totale di 16 valori rappresentabili l'equivalente di $\log_2{16} = 4$ bit. Il LSD è fatto in modo da suddividere ogni step del MSD in altri 16 step. $\Phi$-DAC è quindi equivalente ad un dispositivo a $4_{MSD} + 4_{LSD} = 8$ bit con $2^8 = 256$ valori rappresentabili.
Possono sembrare pochi ma la tecnologia attuale limita il numero di bit a causa delle variazioni di produzione che possono portare i valori fuori dai loro margini.
\myparagraph{$\Phi$-DAC fisici}
Ora che abbiamo visto i $\Phi$-DAC da un punto di vista logico possiamo passare ad analizzare un modello più reale. Nel modello reale il $\Phi$-DAC è realizzato su 6 livelli. Il livello più basso è occupato dalla scala induttiva che è realizzata da due rondelle galvanicamente collegate assieme. I quattro livelli successivi sono occupati dalle spirali degli SQUID che si sovrappongono a gruppi di due ai due fori del livello inferiore. L'ultimo livello composto da uno scudo \textit{sky-plate} è utilizzato schermatura che serve per ridurre accoppiamenti indesiderati tra i $\Phi$-DAC e le altre componenti del circuito. Il collegamento tra $\Phi$-DAC e dispositivo in uscita avviene nel secondo livello attraverso un \textit{microstrip transformer}. Sfortunantamente non tutti i $\Phi$-DAC hanno la stessa forma. Hanno una struttura diversa ad esempio quelli che controllano le giunzioni \textit{Josephson junction} composte \myindex{CJJ} come i sistemi di accoppiamento, i sintonizzatori di induttanza e i compensatori di corrente persistenti, che necessitano di poter usufruire di sensibilità di metà $\Phi_0$. Per aumentare tale controllo si è unito l'anello del CJJ del dispositivo di output con lo stage MSD della scala induttiva. Una ulteriore complicazione di questa particolare struttura è che l'anello $M_{MSD}$ deve essere accoppiato con una forza uguale a entrambe le metà dell'anello CJJ di destinazione per evitare l'accoppiamento nel corpo del dispositivo di destinazione. Per ottenere questo traguardo è stato diviso l'anello $M_{MSD}$ in due metà, modificando di conseguenza i quattro livelli di spirale sovrapposti in quella zona per mantenerne il massimo accostamento.
Come abbiamo visto in questo ultimo passaggio il modello teorico si distanzia sempre di più da quello reale. Altre differenze sono nella trasmissione del segnale. L'anello $M_{LSD}$ fluisce direttamente in quello $M_{MSD}$ il quale può raggiungere l'uscita non solo attraverso la scala induttiva ma anche attraverso la connessione magnetica. Il flusso delle spire dello SQUID $L_{MSD}$ raggiunge direttamente l'uscita con senso opposto a quello passante per l'anello $M_{MSD}$ generando interferenza.
\myparagraph{Generatori di SFQ}
Fino ad ora abbiamo trattato il \myindex{generatore di SFQ} come un semplice generatore di corrente ma in realtà è un oggetto molto più complesso, ora vedremo come è strutturato. Ogni generatore SFQ è formato da due \myindex{DC-SQUID} (Direct Current SQUID) uno per MSD e uno per LSD. Un DC-SQUID è un anello superconduttivo a doppia giunzione \textit{Josephson junction}. Chiamiamo le due giunzioni $J0$ e $J1$ per LSD e $J2$ e $J3$ per MSD. Ogni anello e collegato in maniera diretta con l'alimentazione $PWR$ e con la propria induttanza $L_{MSD}, L_{LSD}$. In ogni anello ci sono anche due resistenze ognuna in parallelo ad una giunzione e due induttanze per collegarsi a due linee, quella degli indirizzi $ADDR$ e quella di trigger $TRIG$. In particolare la linea di $TRIG$ dell'anello LSD è invertita rispetto a quello dell'anello MSD. Per eseguire un'operazione di scrittura la procedura è la seguente. Prima si accende $PWR$ creando una corrente di bias di circa $\frac{I_c}{2}$. Successivamente si abilita $ADDR$ che aggiunge un flusso di bias al corpo dello SQUID. Si prosegue abilitando $TRIG$ in maniera che sia aditivo per l'anello LSD, si induce sufficentemente corrente fino a che $J0$ non supera il suo punto critico generando un cambio di fase di $2\pi$ producendo un SFQ.
In fine si decrementa $TRIG$ causando il cambiamento di fase di $J1$ che riporta lo SQUID al suo stato di flusso base. Sapendo che l'induttanza $L_{LSD}$ è maggiore dell'induttanza dello SQUID, questo ciclo di scrittura viene ripetuto più volte per assicurarsi che la corrente scritta nell'anello di memorizzazione sia comparabile a quella di $PWR$. Due cose da notare in questo procedimento sono l'utilizzo di $PWR$ e quello di $TRIG, ADDR$. Il segno di $PWR$ corrispone anche al segno del SFQ, se $PWR$ è negativo il SFQ andrà sottratto. La scrittura avviene solo se tutti e tre i segnali sono attivi, in particolare se $ADDR$ e $TRIG$ hanno lo stesso verso.  Essendo invertito $TRIG$ tra i due anelli LSD e MSD quando è concorde al verso di LSD è discorde a quello di MSD disabilitando MSD. Le tre linee $PWR$, $TRIG$ e $ADDR$ compongono il sistema di indirizzamento XYZ anticipato precedentemente con un numero di linee pari a $O(\sqrt[3]{N})$ per $N$ $\Phi$-DAC.
